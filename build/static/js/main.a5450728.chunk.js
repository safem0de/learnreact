(this.webpackJsonplearnreact=this.webpackJsonplearnreact||[]).push([[0],{71:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var c=n(3),r=n(0),s=n.n(r),o=n(26),i=n.n(o),a=(n(71),n(29)),l=n(14),u=n(15),d=n(23),h=n(17),j=n(16),b=n(47),m=n.n(b),p=(n(73),n(12)),O="GET_NOTES",f="GET_USER",g="USER_STATUS",v="NOTES_STATUS",x=n(56),y=(n(78),n(81),x.a.initializeApp({apiKey:"AIzaSyBAJ0UdApsas_RKFdRwKZTHKDZUJ9NJEzA",authDomain:"safem0de-01.firebaseapp.com",databaseURL:"https://safem0de-01.firebaseio.com",projectId:"safem0de-01",storageBucket:"safem0de-01.appspot.com",messagingSenderId:"329275356598",appId:"1:329275356598:web:0301167e70ba39d647bd17"})),N=y.firestore(),S=y.auth(),C=new x.a.auth.GoogleAuthProvider;function k(){return function(e){var t={},n=N.collection("notes");n.get().then((function(e){e.forEach((function(e){e.exists&&(t[e.id]={title:e.get("title"),body:e.get("body"),uid:e.get("uid"),comments:e.get("comments")})}))})),e({type:v,payload:!0}),n.get().then((function(){e({type:O,payload:t}),e({type:v,payload:!1})}),(function(){e({type:v,payload:-1})}))}}function w(){return function(e){e({type:g,payload:!0}),S.onAuthStateChanged((function(t){e({type:f,payload:t}),e({type:g,payload:!1})}))}}var L=function(e){return Object(c.jsx)("div",{className:"jumbotron",children:e.children})},B=n(22),D=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).state={title:"",body:"",notes:{}},c.handlerChange=c.handlerChange.bind(Object(d.a)(c)),c.handlerSubmit=c.handlerSubmit.bind(Object(d.a)(c)),c.renderNotes=c.renderNotes.bind(Object(d.a)(c)),c}return Object(u.a)(n,[{key:"handlerChange",value:function(e){this.setState(Object(a.a)({},e.target.name,e.target.value))}},{key:"handlerSubmit",value:function(e){e.preventDefault();var t={title:this.state.title,body:this.state.body,uid:this.props.user.uid};this.props.saveNote(t),this.setState({title:"",body:""})}},{key:"renderNotes",value:function(){var e=this;return m.a.map(this.props.notes,(function(t,n){return Object(c.jsxs)(L,{children:[Object(c.jsx)(B.b,{to:"/".concat(n),children:Object(c.jsx)("h3",{children:t.title})}),Object(c.jsx)("p",{children:t.body}),t.uid===e.props.user.uid&&Object(c.jsxs)("div",{children:[Object(c.jsx)("button",{className:"btn btn-danger btn-xs",onClick:function(){return e.props.deleteNote(n)},children:"Delete"}),Object(c.jsx)(B.b,{to:"/".concat(n,"/edit"),className:"btn btn-info btn-xs float-right",children:"Update"})]})]},n)}))}},{key:"render",value:function(){return Object(c.jsxs)("div",{className:"container-fluid mt-3",children:[Object(c.jsxs)("div",{className:"row align-items-center justify-content-center mb-3",children:[Object(c.jsxs)("div",{className:"col-sm-2 text-center",children:[Object(c.jsx)("img",{src:this.props.user.photoURL,height:"100px",className:"rounded-circle",style:{padding:"20px"},alt:this.props.user.displayName}),Object(c.jsxs)("p",{className:"username",children:["Welcome back ",Object(c.jsx)("br",{}),Object(c.jsx)("b",{children:this.props.user.displayName})]})]}),Object(c.jsx)("div",{className:"col-sm-6 ",children:Object(c.jsxs)("form",{onSubmit:this.handlerSubmit,children:[Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("input",{onChange:this.handlerChange,value:this.state.title,type:"text",name:"title",className:"form-control",placeholder:"Title...",required:!0})}),Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("textarea",{onChange:this.handlerChange,value:this.state.body,type:"text",name:"body",className:"form-control",placeholder:"Body...",required:!0})}),Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("button",{className:"btn btn-primary float-right",children:"Submit"})})]})})]}),Object(c.jsx)("div",{className:"row align-items-center justify-content-center",children:Object(c.jsx)("div",{className:"col-sm-8",children:this.renderNotes()})})]})}}]),n}(r.Component);var T=Object(p.b)((function(e,t){return{notes:e.notes,user:e.user}}),{getNotes:k,saveNote:function(e){return function(t){return n=e,void N.collection("notes").add(n).then((function(){console.log("successful"),window.location.reload()})).catch((function(e){console.log(e)}));var n}},deleteNote:function(e){return function(t){return N.collection("notes").doc(e).delete().then((function(){console.log("Document successfully deleted!"),window.location.reload()})).catch((function(e){console.error("Error removing document: ",e)}))}},getUser:w})(D),U=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentWillMount",value:function(){null!==this.props.user&&this.props.history.push("/")}},{key:"componentWillReceiveProps",value:function(e){null!==e.user&&e.history.push("/")}},{key:"render",value:function(){return Object(c.jsxs)("div",{className:"container-fluid",children:[Object(c.jsx)("div",{className:"row align-items-center justify-content-center",children:Object(c.jsxs)("div",{className:"justify-content-sm-center jumbotron mt-3",children:[Object(c.jsxs)("h1",{children:["Login Sample | ",(new Date).getUTCFullYear()]}),Object(c.jsx)("h5",{children:Object(c.jsx)("i",{children:"Powered by: Safem0de"})}),Object(c.jsx)("hr",{}),Object(c.jsxs)("form",{children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"e-mail :"}),Object(c.jsx)("input",{type:"email",className:"form-control",required:!0})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{children:"Password :"}),Object(c.jsx)("input",{type:"password",className:"form-control",required:!0})]}),Object(c.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})]})}),Object(c.jsx)("div",{className:"row align-items-center justify-content-center",children:Object(c.jsx)("button",{className:"btn-sm btn-info",onClick:this.props.googleLogin,children:"Sign In with Google"})})]})}}]),n}(r.Component);var A=Object(p.b)((function(e,t){return{user:e.user}}),{googleLogin:function(){return function(e){return S.signInWithPopup(C).then((function(){console.log("login success")})).catch((function(e){console.log(e)}))}}})(U),I=n(10),E=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.userLoading,n=e.user;!1!==t||n||this.props.history.push("/login")}},{key:"render",value:function(){var e=this.props,t=e.user,n=e.userLoading,r=e.children;return!1===n&&t?Object(c.jsx)("div",{children:r}):null}}]),n}(r.Component);var R=Object(I.f)(Object(p.b)((function(e){return{user:e.user,userLoading:e.loading.user}}),null)(E)),P=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentWillMount",value:function(){var e=this.props,t=e.userLoading,n=e.notesLoading;void 0===t&&this.props.getUser(),void 0===n&&this.props.getNotes()}},{key:"componentWillReceiveProps",value:function(e){-1===e.notesLoading&&null!==e.user&&this.props.getNotes()}},{key:"render",value:function(){var e=this.props,t=e.userLoading,n=e.notesLoading,r=e.children;return!t&&!n||null===this.props.user?Object(c.jsx)("div",{children:r}):Object(c.jsx)("div",{className:"d-flex justify-content-center",children:Object(c.jsx)("h2",{children:"Loading..."})})}}]),n}(r.Component);var W=Object(I.f)(Object(p.b)((function(e){return{user:e.user,userLoading:e.loading.user,notesLoading:e.loading.notes}}),{getUser:w,getNotes:k})(P)),q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,96)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),c(e),r(e),s(e),o(e)}))},F=n(60),J=n(30),_=n(61),G=n(44),K=Object(J.combineReducers)({notes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return t.payload;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return t.payload;default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(G.a)(Object(G.a)({},e),{},{notes:t.payload});case g:return Object(G.a)(Object(G.a)({},e),{},{user:t.payload});default:return e}}}),M=n(93),z=n(95),H=n(92),Z=n(94),Y=n(65),Q=n(64),V=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return Object(c.jsxs)(M.a,{bg:"light",expand:"lg",children:[Object(c.jsx)(M.a.Brand,{href:"/",children:"React-Bootstrap"}),Object(c.jsx)(M.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(c.jsxs)(M.a.Collapse,{id:"basic-navbar-nav",children:[Object(c.jsxs)(z.a,{className:"mr-auto",children:[Object(c.jsx)(z.a.Link,{href:"#home",children:"Home"}),Object(c.jsx)(z.a.Link,{href:"#link",children:"Link"}),Object(c.jsxs)(H.a,{title:"Dropdown",id:"basic-nav-dropdown",children:[Object(c.jsx)(H.a.Item,{href:"#action/3.1",children:"Action"}),Object(c.jsx)(H.a.Item,{href:"#action/3.2",children:"Another action"}),Object(c.jsx)(H.a.Item,{href:"#action/3.3",children:"Something"}),Object(c.jsx)(H.a.Divider,{}),Object(c.jsx)(H.a.Item,{href:"#action/3.4",children:"Separated link"})]})]}),Object(c.jsxs)(Z.a,{inline:!0,children:[Object(c.jsx)(Y.a,{type:"text",placeholder:"Search",className:"mr-sm-2"}),Object(c.jsx)(Q.a,{variant:"outline-success",children:"Search"})]}),Object(c.jsx)("ul",{className:"nav navbar navbar-right",children:null===this.props.user?Object(c.jsx)("li",{children:Object(c.jsx)(B.b,{to:"/login",children:"Login"})}):Object(c.jsx)("li",{children:Object(c.jsx)(B.b,{to:"/login",onClick:function(){e.props.logout()},children:"Logout"})})})]})]})}}]),n}(r.Component);var X=Object(p.b)((function(e,t){return{user:e.user}}),{getUser:w,logout:function(){return function(e){return S.signOut().then((function(){console.log("logout success")})).catch((function(e){console.log(e)}))}}})(V),$=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).state={commentBody:""},c.handleChange=c.handleChange.bind(Object(d.a)(c)),c.handleSubmit=c.handleSubmit.bind(Object(d.a)(c)),c}return Object(u.a)(n,[{key:"handleChange",value:function(e){this.setState({commentBody:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={commentBody:this.state.commentBody,uid:this.props.uid};this.props.saveComment(this.props.id,t),this.setState({commentBody:""})}},{key:"render",value:function(){return Object(c.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("textarea",{onChange:this.handleChange,value:this.state.commentBody,type:"text",name:"commentBody",className:"form-control",placeholder:"Write Comment...",required:!0})}),Object(c.jsx)("button",{className:"btn btn-success",children:"Add Comment"})]})}}]),n}(r.Component);var ee=Object(p.b)((function(e,t){return{uid:e.user.uid}}),{saveComment:function(e,t){return function(n){return c=e,r=t,void N.collection("notes").doc(c).set({comments:Object(a.a)({},Date.now(),r)},{merge:!0}).then((function(){console.log("Document successfully updated!"),window.location.reload()})).catch((function(e){console.error("Update document: ",e)}));var c,r}}})($),te=function(e){return Object(c.jsx)("div",{children:e.children})},ne=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"renderComments",value:function(){var e=this.props.note;return m.a.map(e.comments,(function(e,t){return Object(c.jsx)(te,{id:t,children:e.commentBody},t)}))}},{key:"render",value:function(){var e=this.props.note;return Object(c.jsx)("div",{className:"container-fluid mt-3",children:Object(c.jsx)("div",{className:"row align-items-center justify-content-center",children:Object(c.jsxs)("div",{className:"col-sm-6 justify-content-sm-center",children:[Object(c.jsx)("h2",{children:e.title}),Object(c.jsx)("p",{children:e.body}),Object(c.jsx)(ee,{id:this.props.match.params.id}),Object(c.jsx)("br",{}),this.renderComments(),Object(c.jsx)("hr",{}),Object(c.jsx)(B.b,{to:"/",children:"Back"})]})})})}}]),n}(r.Component);var ce=Object(p.b)((function(e,t){return{note:e.notes[t.match.params.id],uid:e.user.uid}}))(ne),re=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).state={title:c.props.note.title,body:c.props.note.body},c.handlerChange=c.handlerChange.bind(Object(d.a)(c)),c.handlerSubmit=c.handlerSubmit.bind(Object(d.a)(c)),c}return Object(u.a)(n,[{key:"handlerChange",value:function(e){this.setState(Object(a.a)({},e.target.name,e.target.value))}},{key:"handlerSubmit",value:function(e){e.preventDefault();var t={title:this.state.title,body:this.state.body,uid:this.props.uid};this.props.editNote(this.props.match.params.id,t),this.setState({title:"",body:""}),this.props.history.push("/")}},{key:"render",value:function(){return Object(c.jsx)("div",{className:"container-fluid mt-3",children:Object(c.jsx)("div",{className:"row align-items-center justify-content-center",children:Object(c.jsx)("div",{className:"col-sm-6 col-sm-offset-3",children:Object(c.jsxs)("form",{onSubmit:this.handlerSubmit,children:[Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("input",{onChange:this.handlerChange,value:this.state.title,type:"text",name:"title",className:"form-control",placeholder:"Title...",required:!0})}),Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("textarea",{onChange:this.handlerChange,value:this.state.body,type:"text",name:"body",className:"form-control",placeholder:"Body...",required:!0})}),Object(c.jsx)("div",{className:"form-group",children:Object(c.jsx)("button",{className:"btn btn-primary",children:"Submit"})})]})})})})}}]),n}(r.Component);var se=Object(p.b)((function(e,t){return{note:e.notes[t.match.params.id],uid:e.user.uid}}),{editNote:function(e,t){return function(n){return function(e,t){N.collection("notes").doc(e).update(t).then((function(){console.log("Document successfully updated!"),window.location.reload()})).catch((function(e){console.error("Error updating document: ",e)}))}(e,t)}}})(re),oe=Object(J.createStore)(K,Object(_.composeWithDevTools)(Object(J.applyMiddleware)(F.a)));i.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(p.a,{store:oe,children:Object(c.jsx)(B.a,{children:Object(c.jsx)(W,{children:Object(c.jsxs)(I.c,{children:[Object(c.jsx)(I.a,{path:"/login",component:A,exact:!0}),Object(c.jsxs)(R,{children:[Object(c.jsx)(X,{}),Object(c.jsx)(I.a,{path:"/",component:T,exact:!0}),Object(c.jsx)(I.a,{path:"/:id",component:ce,exact:!0}),Object(c.jsx)(I.a,{path:"/:id/edit",component:se,exact:!0})]})]})})})})}),document.getElementById("root")),q()}},[[86,1,2]]]);
//# sourceMappingURL=main.a5450728.chunk.js.map